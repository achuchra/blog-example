(this["webpackJsonpblog-app-ts"]=this["webpackJsonpblog-app-ts"]||[]).push([[0],{83:function(e,t,n){"use strict";n.r(t);var r,c=n(2),a=n(0),i=n(7),o=n.n(i),s=n(15),u=n(21),l=n.n(u),j=n(29);!function(e){e.GET_CURRENT="/api/users/current",e.GET_ARTICLES="/api/articles",e.GET_ARTICLE="/api/articles/",e.ADD_ARTICLE="/api/articles",e.UPDATE_ARTICLE="/api/articles/",e.DELETE_ARTICLE="/api/articles/",e.USER_LOGIN="/api/user/login",e.USER_UPDATE="/api/user/update/",e.USER_LOGOUT="/api/user/logout",e.USER_REGISTER="/api/user/register"}(r||(r={}));var b={"Content-Type":"application/json"},p=function(){var e=Object(j.a)(l.a.mark((function e(t,n,r){var c,a,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=i.length>3&&void 0!==i[3]?i[3]:b,e.next=3,fetch(t,{method:n,body:r?JSON.stringify(r):null,headers:c||b});case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),f=function(){var e=Object(j.a)(l.a.mark((function e(){var t,n=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.apply(void 0,n);case 3:return t=e.sent,e.abrupt("return",t.json());case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),d=r.GET_CURRENT,O=r.GET_ARTICLES,h=(r.GET_ARTICLE,r.ADD_ARTICLE,r.UPDATE_ARTICLE,r.DELETE_ARTICLE,r.USER_LOGIN,r.USER_UPDATE,r.USER_LOGOUT,r.USER_REGISTER,function(){return f(d,"GET")}),E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return f("".concat(O,"?page=").concat(e),"GET")},g=function(e){return{type:"GET_CURRENT_USER",payload:e}},x=n(9),T=function(e){return{type:"FETCHING_ARTICLES",payload:e}},R=function(e){return{type:"GET_ARTICLES",payload:e}},v=function(e){return{type:"FETCHING_ERROR",payload:e}},y=n(90),_=n(115),m=n(116),U=n(86),A=function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth(),c=t.getDate();return"".concat(n,"-").concat(r,"-").concat(c)},C=function(){var e=Object(x.g)(),t=new URLSearchParams(e.search).get("page")||1,n=Object(s.b)(),r=Object(s.c)((function(e){return e}));console.log(r),Object(a.useEffect)((function(){n(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(){var t=Object(j.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n(T(!0)),E(e).then((function(e){n(R(e))})).catch((function(){n(v(!0))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}),[]);return Object(c.jsx)("div",{children:r.articlesData.articles?Object(c.jsx)(m.a,{children:Object(c.jsx)(U.a,{children:r.articlesData.articles.docs.map((function(e){return Object(c.jsx)(y.a,{button:!0,children:Object(c.jsx)(_.a,{primary:e.title,secondary:A(e.createdAt)})},e.id)}))})}):r.articlesData.fetchingError?Object(c.jsx)("p",{children:"Fetching failed :("}):Object(c.jsx)("p",{children:"Fetching..."})})},G=function(){var e=Object(s.b)();Object(a.useEffect)((function(){e(function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h().then((function(e){var n=e.currentUser?e:{};t(g(n))})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var t="currentUser"in Object(s.c)((function(e){return e.currentUser})).currentUser;return console.log(t),Object(c.jsxs)(x.d,{children:[Object(c.jsx)(x.b,{exact:!0,path:"/",component:C}),Object(c.jsx)(x.b,{path:"/dashboard",children:t?"<Dashboard />":Object(c.jsx)(x.a,{to:"/login"})}),Object(c.jsx)(x.b,{path:"/settings",children:t?"<Settings />":Object(c.jsx)(x.a,{to:"/login"})}),Object(c.jsx)(x.b,{path:"/login",children:t?Object(c.jsx)(x.a,{to:"/settings"}):"<Login />"})]})},L=n(26),I=n(62),S=n(14),w="FETCHING_ARTICLES",D="FETCHING_ERROR",N="GET_ARTICLES",k="GET_CURRENT_USER",F="TOGGLE_DRAWER",P={articles:null,fetchingArticles:!1,fetchingError:!1},H={currentUser:{}},J={open:!1},M=Object(L.c)({articlesData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(S.a)(Object(S.a)({},e),{},{articles:t.payload,fetchingArticles:!1});case w:return Object(S.a)(Object(S.a)({},e),{},{fetchingArticles:t.payload});case D:return Object(S.a)(Object(S.a)({},e),{},{fetchingError:!0,fetchingArticles:!1});default:return Object(S.a)({},e)}},currentUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(S.a)(Object(S.a)({},e),{},{currentUser:t.payload});default:return Object(S.a)({},e)}},drawer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(S.a)(Object(S.a)({},e),{},{open:t.payload});default:return Object(S.a)({},e)}}}),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||L.d,W=Object(L.e)(M,B(Object(L.a)(I.a))),X=n(24),V=n(44),Y=function(e){return{type:"TOGGLE_DRAWER",payload:e}},q=n(117),z=n(125),K=n(118),Q=n(47),Z=n(64),$=n.n(Z),ee=n(63),te=n.n(ee),ne=n(119),re=Object(q.a)((function(e){return Object(z.a)({root:Object(V.a)({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",padding:"5px 15px"},e.breakpoints.up("sm"),{padding:"10px 30px 10px 5px"}),toRight:{marginLeft:"auto",marginRight:"10px"}})})),ce=function(){var e=Object(s.b)(),t=re();return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)(K.a,{color:"secondary",className:t.root,children:[Object(c.jsx)(ne.a,{color:"primary",onClick:function(){return e(Y(!0))},children:Object(c.jsx)(te.a,{})}),Object(c.jsx)($.a,{className:t.toRight}),Object(c.jsx)(Q.a,{variant:"h5",children:"Blog app"})]})})},ae=n(124),ie=n(120),oe=n(121),se=n(122),ue=function(){var e="currentUser"in Object(s.c)((function(e){return e.currentUser})).currentUser,t=Object(x.g)().pathname,n=Object(a.useMemo)((function(){return function(e){return t===e}}),[t]),r="/",i="/dashboard",o="/settings",u="/login";return Object(c.jsxs)(ie.a,{children:[Object(c.jsx)(oe.a,{component:X.b,to:r,selected:n(r),children:Object(c.jsx)(Q.a,{variant:"body1",children:"Home"})}),Object(c.jsx)(se.a,{}),Object(c.jsx)(oe.a,{component:X.b,to:i,selected:n(i),children:Object(c.jsx)(Q.a,{variant:"body1",children:"dashboard"})}),Object(c.jsx)(se.a,{}),e?Object(c.jsx)(oe.a,{component:X.b,to:o,selected:n(o),children:Object(c.jsx)(Q.a,{variant:"body1",children:"settings"})}):null,e?Object(c.jsx)(se.a,{}):null,e?null:Object(c.jsx)(oe.a,{component:X.b,to:u,selected:n(u),children:Object(c.jsx)(Q.a,{variant:"body1",children:"login"})})]})},le=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.drawer.open}));return Object(c.jsx)(ae.a,{open:t,onClose:function(){return e(Y(!1))},children:Object(c.jsx)(ue,{})})},je=function(e){var t=e.children;return console.log(le),console.log(ce),Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(ce,{}),Object(c.jsx)(le,{}),t]})},be=n(123),pe=n(65),fe=Object(pe.a)({palette:{common:{black:"#000",white:"#fff",grey:"#eee"},background:{paper:"#fff",default:"#fafafa",main:"#f5f5f5"},primary:{light:"#ff8e8a",main:"#ff7d79",dark:"#ee5c68",contrastText:"#fff"},secondary:{light:"#8272a4",main:"#716193",dark:"#605082",contrastText:"#fff"},error:{light:"#e57373",main:"#f44336",dark:"#d32f2f",contrastText:"#fff"},text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"}}}),de=function(){return Object(c.jsx)(s.a,{store:W,children:Object(c.jsx)(be.a,{theme:fe,children:Object(c.jsx)(X.a,{children:Object(c.jsx)(je,{children:Object(c.jsx)(G,{})})})})})};o.a.render(Object(c.jsx)(de,{}),document.getElementById("root"))}},[[83,1,2]]]);
//# sourceMappingURL=main.af873489.chunk.js.map